<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>WildPointer  | Sed &amp; Awk</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.67.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.955516233bcafa4d2a1c13cea63c7b50.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="Sed &amp; Awk" />
<meta property="og:description" content="I have been using both Sed and Awk in its basic forms for quite sometime without study them systematically. So the understandings were always a bit incomplete and hence inconsistent. So after many years of delay, I finally read the classic book of Sed &amp; Awk.
It is a great read for anyone who is interested in the two tools or just good-old Unix quirks. For an example, name of the grep tool is based on the g/re/p command of the classic ed, or how ed, Vi, and Sed are related to each other (hint: they share similar command pattern)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ywangd.github.io/posts/sed-and-awk/" />
<meta property="article:published_time" content="2019-03-23T20:57:02+11:00" />
<meta property="article:modified_time" content="2019-03-23T20:57:02+11:00" />
<meta itemprop="name" content="Sed &amp; Awk">
<meta itemprop="description" content="I have been using both Sed and Awk in its basic forms for quite sometime without study them systematically. So the understandings were always a bit incomplete and hence inconsistent. So after many years of delay, I finally read the classic book of Sed &amp; Awk.
It is a great read for anyone who is interested in the two tools or just good-old Unix quirks. For an example, name of the grep tool is based on the g/re/p command of the classic ed, or how ed, Vi, and Sed are related to each other (hint: they share similar command pattern).">
<meta itemprop="datePublished" content="2019-03-23T20:57:02&#43;11:00" />
<meta itemprop="dateModified" content="2019-03-23T20:57:02&#43;11:00" />
<meta itemprop="wordCount" content="484">



<meta itemprop="keywords" content="book," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sed &amp; Awk"/>
<meta name="twitter:description" content="I have been using both Sed and Awk in its basic forms for quite sometime without study them systematically. So the understandings were always a bit incomplete and hence inconsistent. So after many years of delay, I finally read the classic book of Sed &amp; Awk.
It is a great read for anyone who is interested in the two tools or just good-old Unix quirks. For an example, name of the grep tool is based on the g/re/p command of the classic ed, or how ed, Vi, and Sed are related to each other (hint: they share similar command pattern)."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://ywangd.github.io/images/dining-table-set.jpg');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://ywangd.github.io/" class="f3 fw2 hover-white no-underline white-90 dib">
      WildPointer
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Articles page">
              Articles
            </a>
          </li>
          
        </ul>
      
      
<div hidden>
  <span id="new-window-0">Opens in a new window</span>
  <span id="new-window-1">Opens an external site</span>
  <span id="new-window-2">Opens an external site in a new window</span>
</div>







<a href="https://github.com/ywangd" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-describedby="new-window-0">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>



    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Sed &amp; Awk</h1>
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3 ph0-l">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        ARTICLES
      </p>
      <h1 class="f1 athelas mb1">Sed &amp; Awk</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2019-03-23T20:57:02&#43;11:00">March 23, 2019</time>      
      
      
    </header>

    <main class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>I have been using both Sed and Awk in its basic forms for quite sometime without
study them systematically. So the understandings were always a bit incomplete
and hence inconsistent. So after many years of delay, I finally read the classic
book of <a href="https://www.amazon.com/sed-awk-Dale-Dougherty/dp/1565922255">Sed &amp; Awk</a>.</p>
<p>It is a great read for anyone who is interested in the two tools or just
good-old Unix quirks. For an example, name of the <code>grep</code> tool is based on the
<code>g/re/p</code> command of the classic <code>ed</code>, or how ed, Vi, and Sed are related to
each other (hint: they share similar command pattern).</p>
<p>The author is obviously rooted in Unix traditions which I appreciate. The
book&rsquo;s approach is gradual but does require certain level of familiarity of
Unix/Linux to be able to get the most out of it. For an example, the section
about <code>ed</code> and history or the many examples related <code>troff</code> may turn away
readers that are not interested in this area. Regular expression is a big part
of using Sed and Awk. The book does devote a chapter for regular expression,
which should cover most day-to-day usages.</p>
<p>Some worth to note special quirks about the two tools:</p>
<ul>
<li><code>#n</code> can be used as the first line of a Sed script to turn off default output.</li>
<li>Sed does not tolerant trailing white spaces in scripts.</li>
<li>Awk&rsquo;s variables are global by default, even inside functions. To achieve local
function variables, they have to be defined as function parameters.</li>
</ul>
<p>Both Sed and Awk can be used to analyse logs and they do a fair job. In recent
years there are a few new tools dedicated to this area and they seem to do a
better job in some aspects. For an example,
<a href="https://github.com/rcoh/angle-grinder">angle-grinder</a> defines a pipeline like
syntax that allow chaining operators to refine the results. The builtin
functions provide high level aggregations such as average, percentile, count
and json so it is easier to use. However, though more convenient, they are not
as powerful as Sed and Awk (especially Awk), e.g. no flow control constructs,
no way to define user functions or add any extensions, not able to work across
multiple lines etc.</p>
<p>One task that I encountered involves calculation of time interval distribution
for an event. Each event is a single line in the log file and it can be
identified by a regex pattern. The tricky bit is to calculate the time interval
which requires compute the timestamp difference of two lines. A further
requirement is to group the interval based on the actual event message. I solved
it by using Sed, Awk, angle-grinder and <a href="https://pandas.pydata.org/">Pandas</a>
and it felt unnecessarily cumbersome. So if possible, I would like to see
another new tool that has following combined strengths:</p>
<ul>
<li>Runs locally in a terminal</li>
<li>Powerful and extensible (Sed and Awk)</li>
<li>Pipeline like syntax and easy to use (angle-grinder)</li>
<li>Sophisticated data analysis and ease of data manipulation (Pandas)</li>
</ul>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/book" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">book</a>
   </li>
  
</ul>
<div class="mt6">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "ywangd" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </main>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-navy bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://ywangd.github.io/" >
    &copy; 2020 WildPointer
  </a>
    <div>
<div hidden>
  <span id="new-window-0">Opens in a new window</span>
  <span id="new-window-1">Opens an external site</span>
  <span id="new-window-2">Opens an external site in a new window</span>
</div>







<a href="https://github.com/ywangd" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-describedby="new-window-0">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
